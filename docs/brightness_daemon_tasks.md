# 輝度自動調整デーモン 実装タスク

## フェーズ1タスク

### 1. プロジェクトセットアップ
- [ ] 新しいCMakeターゲット（BrightnessDaemon）の作成
- [ ] 必要なライブラリの依存関係設定
  - Win32 API（タスクトレイ）
  - DisplayControllerLib（モニター制御）
  - スレッド制御

### 2. 基本クラスの実装
- [ ] ILightSensorインターフェースの作成
- [ ] DummyLightSensorの実装
  - ランダムな値または固定値の返却
  - 簡単なテストケース
- [ ] BrightnessManagerクラスの実装
  - 基本的なスレッド制御
  - 輝度計算ロジック
  - MonitorController統合

### 3. タスクトレイアプリケーション
- [ ] Win32 APIを使用したタスクトレイアイコンの実装
- [ ] コンテキストメニューの実装
  - 同期開始/停止
  - 終了オプション
- [ ] アプリケーションのライフサイクル管理

### 4. 統合とテスト
- [ ] 各コンポーネントの統合
- [ ] 基本的な動作確認
  - 起動/終了処理
  - 輝度同期機能
  - メニュー操作
- [ ] エラーケースの確認

## フェーズ2タスク（将来）

### 1. SwitchBot API統合
- [ ] SwitchBot APIクライアントの設計
- [ ] 実際のセンサーデータ取得実装
- [ ] エラーハンドリングの実装

### 2. 設定管理
- [ ] 設定ファイルフォーマットの定義
- [ ] 設定の保存/読み込み機能
- [ ] デフォルト値の管理

### 3. エラー処理の強化
- [ ] 詳細なエラーログ
- [ ] ユーザー通知システム
- [ ] 自動リカバリー機能

## フェーズ3タスク（将来）

### 1. GUI設定画面
- [ ] 設定ダイアログの設計
- [ ] 設定項目のUI実装
- [ ] リアルタイムプレビュー機能

### 2. 高度な制御機能
- [ ] 時間帯別設定
- [ ] カスタム輝度カーブ
- [ ] モニター個別設定

### 3. モニタリング機能
- [ ] 輝度/照度ログ
- [ ] 統計情報の表示
- [ ] 診断機能

## 注意事項

1. フェーズ1の実装に集中し、基本機能を確実に動作させる
2. コードの品質とテストを重視
3. エラーハンドリングは最初から適切に実装
4. 将来の拡張性を考慮した設計を維持

## 開発環境

- Visual Studio 2022
- C++17以上
- Windows SDK 10.0
- CMake 3.20以上

## ビルド手順

1. CMakeプロジェクトの生成
```bash
cmake -B build -S .
```

2. ビルドの実行
```bash
cmake --build build --config Release
```

3. テストの実行
```bash
ctest --test-dir build

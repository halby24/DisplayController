# 設定バリデーション改善計画

## 1. 概要
現在の設定バリデーションシステムでは、設定が不正な場合に型のミスマッチのみが表示される問題があります。この改善計画では、より詳細なエラー情報を提供し、ユーザーが設定の問題を特定しやすくすることを目指します。

## 2. 主な改善点

### 2.1 ConfigValidationResult構造体
```cpp
struct ConfigValidationResult {
    bool isValid;           // バリデーション結果
    std::string path;       // 設定のパス（例：plugins.SwitchBotLightSensor.devices[0].name）
    std::string expectedType; // 期待される型
    std::string actualType;   // 実際の型
    std::string value;        // 問題のある値
    std::string message;      // エラーメッセージ
};
```

### 2.2 バリデーション機能の強化
- 型チェックの詳細化
- 値の範囲チェックの改善
- パスベースのエラー報告システム

### 2.3 エラーメッセージの改善
- 日本語での明確な説明
- 具体的な設定値の表示
- 修正のためのガイダンス

## 3. 実装計画

### 3.1 フェーズ1: 基本構造の実装
- ConfigValidationResult構造体の実装
- バリデーション関数の基本フレームワーク作成

### 3.2 フェーズ2: バリデーションロジックの強化
- 型チェックの詳細化
- 値の範囲チェックの改善
- パスベースのエラー報告システムの実装

### 3.3 フェーズ3: エラーメッセージの改善
- エラーメッセージテンプレートの作成
- 具体的な値と期待値の表示機能の実装
- ガイダンスメッセージの実装

## 4. 期待される効果
- ユーザーが設定の問題をより簡単に特定できるようになる
- 設定エラーの修正時間の短縮
- より良いユーザーエクスペリエンスの提供

## 5. 実装の注意点
- 既存のエラーハンドリングとの互換性維持
- パフォーマンスへの影響の最小化
- エラーメッセージの一貫性の確保

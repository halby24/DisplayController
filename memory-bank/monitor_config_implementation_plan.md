# モニター設定の自動追加機能 実装計画

## 概要
BrightnessDaemon起動時に、接続されているすべてのモニターの設定を自動的に追加する機能を実装します。
各モニターは人間が識別可能な名前を持ち、設定ファイルで管理されます。

## 実装要件

### 1. 自動設定追加
- BrightnessDaemon起動時に設定チェック
- 未設定のモニターを検出
- 各モニターの識別情報を収集
- 設定を自動生成して追加

### 2. モニター識別子（name）の生成
- 人間が識別可能な情報を使用
- 組み合わせる情報：
  * 製造元名（例：DELL, ASUS, LG）
  * 製品名/モデル名
  * 物理サイズ（例：24inch）
  * 役割情報（例：Primary）
- 命名例：`DELL P2419H 24inch Primary`
- フォールバック例：`Display 1 24inch`

### 3. 実装範囲

#### BrightnessDaemonクラス
- 起動時に設定チェックを行うメソッドを追加
- 未設定モニターの自動追加処理
- エラーハンドリング

#### MonitorControllerクラス
- GetDetailedMonitorInfo()の実装完了
- 物理サイズのフォーマット（mm→inch）
- 識別可能な名前生成メソッドの追加
- 重複名の処理（末尾に番号を付加）

#### ConfigManagerクラス
- モニター設定の存在チェックメソッド
- デフォルトのモニター設定生成メソッド
- 設定ファイルの自動バックアップ

### 4. 設定ファイル構造
```json
{
  "monitors": [
    {
      "name": "DELL P2419H 24inch Primary",
      "brightness_range": {
        "min": 0,
        "max": 100
      }
    }
  ],
  "plugins": {
    // 既存の設定を維持
  },
  "brightness_daemon": {
    // 既存の設定を維持
  }
}
```

### 5. エラーハンドリング
- モニター情報取得失敗時のフォールバック処理
  * Generic名の生成（例：`Display 1 24inch`）
- 重複名の処理
  * 末尾に番号を付加（例：`DELL P2419H 24inch (2)`）
- 設定ファイルの破損対策
  * 自動バックアップ
  * 復旧処理

## 実装手順
1. MonitorControllerの拡張
   - 詳細情報取得機能の実装
   - 名前生成ロジックの実装

2. ConfigManagerの拡張
   - モニター設定管理機能の追加
   - バリデーション機能の拡張

3. BrightnessDaemonの拡張
   - 起動時チェック機能の実装
   - 自動設定追加処理の実装

4. テストの実装
   - 各クラスの単体テスト
   - 統合テスト

5. ドキュメントの更新
   - 設定ファイルのフォーマット
   - 自動設定追加機能の説明
   - エラーハンドリングの説明
